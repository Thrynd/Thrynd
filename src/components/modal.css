/*
 * Thrynd Modal & Dialog
 * Modal dialogs and overlays
 */

/**
 * @thrynd component modal
 * @description Dialog overlay for focused user interaction
 * @category overlay
 * @complexity moderate
 */

/**
 * @thrynd part backdrop
 * @parent modal
 * @class modal-backdrop
 * @usage Semi-transparent overlay behind modal
 * @example <div class="modal-backdrop show"></div>
 */

/**
 * @thrynd variant default
 * @parent modal
 * @class modal
 * @usage Modal container (centered flexbox)
 * @example <div class="modal show"><div class="modal-dialog">...</div></div>
 */

/**
 * @thrynd part dialog
 * @parent modal
 * @class modal-dialog
 * @usage The modal content container with max-width
 * @example <div class="modal-dialog"><div class="modal-header">...</div><div class="modal-body">...</div></div>
 */

/**
 * @thrynd size small
 * @parent modal
 * @class modal-dialog-sm
 * @usage Narrow modal (300px max-width)
 * @example <div class="modal-dialog modal-dialog-sm">...</div>
 */

/**
 * @thrynd size large
 * @parent modal
 * @class modal-dialog-lg
 * @usage Wide modal (800px max-width)
 * @example <div class="modal-dialog modal-dialog-lg">...</div>
 */

/**
 * @thrynd size xlarge
 * @parent modal
 * @class modal-dialog-xl
 * @usage Extra wide modal (1140px max-width)
 * @example <div class="modal-dialog modal-dialog-xl">...</div>
 */

/**
 * @thrynd modifier fullscreen
 * @parent modal
 * @class modal-dialog-fullscreen
 * @usage Full viewport modal
 * @example <div class="modal-dialog modal-dialog-fullscreen">...</div>
 */

/**
 * @thrynd part header
 * @parent modal
 * @class modal-header
 * @usage Modal title bar with close button
 * @example <div class="modal-header"><h2 class="modal-title">Title</h2><button class="modal-close">&times;</button></div>
 */

/**
 * @thrynd part title
 * @parent modal
 * @class modal-title
 * @usage Modal heading text
 * @example <h2 class="modal-title">Confirm Action</h2>
 */

/**
 * @thrynd part close
 * @parent modal
 * @class modal-close
 * @usage Close button in header
 * @example <button class="modal-close" aria-label="Close">&times;</button>
 */

/**
 * @thrynd part body
 * @parent modal
 * @class modal-body
 * @usage Main modal content area
 * @example <div class="modal-body"><p>Modal content here</p></div>
 */

/**
 * @thrynd part footer
 * @parent modal
 * @class modal-footer
 * @usage Action buttons area
 * @example <div class="modal-footer"><button class="btn-secondary">Cancel</button><button class="btn-primary">Confirm</button></div>
 */

/**
 * @thrynd state show
 * @parent modal
 * @class show
 * @description Makes modal visible
 * @example <div class="modal show">...</div>
 */

/**
 * @thrynd component dropdown
 * @description Toggle-activated menu overlay
 * @category overlay
 * @complexity moderate
 */

/**
 * @thrynd variant default
 * @parent dropdown
 * @class dropdown
 * @usage Container for dropdown trigger and menu
 * @example <div class="dropdown"><button class="dropdown-toggle">Menu</button><div class="dropdown-menu">...</div></div>
 */

/**
 * @thrynd part toggle
 * @parent dropdown
 * @class dropdown-toggle
 * @usage Element that triggers dropdown
 * @example <button class="dropdown-toggle">Options</button>
 */

/**
 * @thrynd part menu
 * @parent dropdown
 * @class dropdown-menu
 * @usage Dropdown content container
 * @example <div class="dropdown-menu"><a class="dropdown-item" href="#">Option 1</a></div>
 */

/**
 * @thrynd part item
 * @parent dropdown
 * @class dropdown-item
 * @usage Individual menu option
 * @example <a class="dropdown-item" href="#">Edit</a>
 */

/**
 * @thrynd part divider
 * @parent dropdown
 * @class dropdown-divider
 * @usage Horizontal separator between items
 * @example <div class="dropdown-divider"></div>
 */

/**
 * @thrynd modifier right
 * @parent dropdown
 * @class dropdown-menu-right
 * @usage Align menu to right edge of trigger
 * @example <div class="dropdown-menu dropdown-menu-right">...</div>
 */

/**
 * @thrynd component popover
 * @description Rich tooltip with header and body
 * @category overlay
 * @complexity simple
 */

/**
 * @thrynd variant default
 * @parent popover
 * @class popover
 * @usage Positioned content popup
 * @example <div class="popover"><div class="popover-header">Title</div><div class="popover-body">Content</div></div>
 */

/**
 * @thrynd part header
 * @parent popover
 * @class popover-header
 * @usage Popover title
 * @example <div class="popover-header">Info</div>
 */

/**
 * @thrynd part body
 * @parent popover
 * @class popover-body
 * @usage Popover content
 * @example <div class="popover-body">More details here</div>
 */

/**
 * @thrynd accessibility required
 * @parent modal
 * @required Use aria-modal="true" and role="dialog" on modal
 */

/**
 * @thrynd accessibility required
 * @parent modal
 * @required Trap focus within modal when open
 */

/**
 * @thrynd accessibility keyboard
 * @parent modal
 * @keyboard Escape key should close modal
 */

/**
 * @thrynd accessibility required
 * @parent dropdown
 * @required Use aria-expanded on toggle, aria-haspopup="menu"
 */

/* Modal backdrop */
.modal-backdrop {
  position: fixed;
  inset: 0;
  background-color: rgba(0, 0, 0, 0.5);
  z-index: var(--z-modal-backdrop);
  display: none;
  animation: fadeIn var(--transition-fast);
}

.modal-backdrop.show {
  display: block;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

/* Modal */
.modal {
  position: fixed;
  inset: 0;
  z-index: var(--z-modal);
  display: none;
  align-items: center;
  justify-content: center;
  padding: var(--space-4);
  overflow-y: auto;
}

.modal.show {
  display: flex;
}

/* Modal dialog */
.modal-dialog {
  position: relative;
  width: 100%;
  max-width: 500px;
  background-color: var(--color-surface);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-2xl);
  animation: slideDown var(--transition-base);
}

@keyframes slideDown {
  from {
    transform: translateY(-50px);
    opacity: 0;
  }

  to {
    transform: translateY(0);
    opacity: 1;
  }
}

/* Modal sizes */
.modal-dialog-sm {
  max-width: 300px;
}

.modal-dialog-lg {
  max-width: 800px;
}

.modal-dialog-xl {
  max-width: 1140px;
}

.modal-dialog-fullscreen {
  max-width: 100%;
  height: 100%;
  margin: 0;
  border-radius: 0;
}

/* Modal sections */
.modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-6);
  border-bottom: 1px solid var(--color-border);
}

.modal-title {
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-bold);
  margin: 0;
}

.modal-close {
  background: none;
  border: none;
  font-size: var(--font-size-2xl);
  line-height: 1;
  cursor: pointer;
  color: var(--color-text-secondary);
  transition: color var(--transition-fast);
  padding: 0;
  width: 2rem;
  height: 2rem;
  display: flex;
  align-items: center;
  justify-content: center;
}

.modal-close:hover {
  color: var(--color-text);
}

.modal-body {
  padding: var(--space-6);
}

.modal-footer {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: var(--space-3);
  padding: var(--space-6);
  border-top: 1px solid var(--color-border);
}

/* Dropdown */
.dropdown {
  position: relative;
  display: inline-block;
}

.dropdown-toggle {
  cursor: pointer;
}

.dropdown-menu {
  position: absolute;
  top: 100%;
  left: 0;
  z-index: var(--z-dropdown);
  display: none;
  min-width: 10rem;
  padding: var(--space-2) 0;
  margin-top: var(--space-2);
  background-color: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
}

/* CSS-only dropdown - shows on focus-within */
.dropdown:focus-within .dropdown-menu,
.dropdown-menu.show {
  display: block;
  animation: fadeInDown var(--transition-fast);
}

/* Allow dropdown toggle to be focusable */
.dropdown-toggle:focus {
  outline: none;
}

@keyframes fadeInDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.dropdown-menu-right {
  left: auto;
  right: 0;
}

.dropdown-item {
  display: block;
  width: 100%;
  padding: var(--space-2) var(--space-4);
  color: var(--color-text);
  text-decoration: none;
  background: none;
  border: none;
  text-align: left;
  cursor: pointer;
  transition: background-color var(--transition-fast);
}

.dropdown-item:hover {
  background-color: var(--color-gray-100);
  text-decoration: none;
}

.dropdown-item.active {
  background-color: var(--color-primary);
  color: var(--color-white);
}

.dropdown-divider {
  height: 1px;
  margin: var(--space-2) 0;
  background-color: var(--color-border);
}

/* Popover */
.popover-wrapper {
  position: relative;
  display: inline-block;
}

.popover {
  position: absolute;
  z-index: var(--z-popover);
  max-width: 276px;
  padding: var(--space-4);
  background-color: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  opacity: 0;
  visibility: hidden;
  transition: opacity var(--transition-fast), visibility var(--transition-fast);
}

/* CSS-only popover - shows on hover/focus */
.popover-wrapper:hover .popover,
.popover-wrapper:focus-within .popover,
.popover.show {
  opacity: 1;
  visibility: visible;
}

/* Popover positions */
.popover-top {
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  margin-bottom: 0.5rem;
}

.popover-bottom {
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  margin-top: 0.5rem;
}

.popover-left {
  right: 100%;
  top: 50%;
  transform: translateY(-50%);
  margin-right: 0.5rem;
}

.popover-right {
  left: 100%;
  top: 50%;
  transform: translateY(-50%);
  margin-left: 0.5rem;
}

.popover-header {
  font-weight: var(--font-weight-bold);
  margin-bottom: var(--space-2);
  padding-bottom: var(--space-2);
  border-bottom: 1px solid var(--color-border);
}

.popover-body {
  font-size: var(--font-size-sm);
  color: var(--color-text);
}
